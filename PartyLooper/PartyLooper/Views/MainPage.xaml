<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PartyLooper.Views.MainPage"
             xmlns:xct="http://xamarin.com/schemas/2020/toolkit"
             BackgroundColor="{StaticResource Background}"
             Title="{Binding Title}">

    <ContentPage.Resources>
        <x:String x:Key="CustomValueLabeStringFormat">{0:N0}</x:String>
        <ResourceDictionary>
            <Style x:Key="ThumbLabelStyle" TargetType="Label">
                <Setter Property="TextColor" Value="{StaticResource SecondaryAccent}"></Setter>
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>
    
    <ContentPage.Background>
        <LinearGradientBrush>
            <GradientStop Color="#333"
                          Offset="0.05" />
            <GradientStop Color="#333"
                          Offset="0.4" />
            <GradientStop Color="Black"
                          Offset="0.75" />
        </LinearGradientBrush>
    </ContentPage.Background>
    
    <StackLayout Padding="10,20,10,0" VerticalOptions="FillAndExpand" Orientation="Vertical">
        <StackLayout Orientation="Horizontal" HorizontalOptions="Center">
            <Button x:Name="btnOpenMedia" Text="Open media"/>
            <Button x:Name="btnAddToPlaylist" Text="+" WidthRequest="50" IsEnabled="False"/>
        </StackLayout>
        <StackLayout HeightRequest="20">
            <Label x:Name="lbPlaylistMsg" Text="Current song added to the playlist" 
                   VerticalOptions="Center" HorizontalOptions="Center" IsVisible="False" TextColor="{StaticResource Accent}"/>
        </StackLayout>
        <StackLayout Orientation="Horizontal" Padding="20,4,20,4">
            <Slider x:Name="sliderSongControl" Minimum="0" Maximum="100"
                HorizontalOptions="FillAndExpand"
                ThumbColor="{StaticResource Accent}"
                MinimumTrackColor="{StaticResource Accent}"
                MaximumTrackColor="White"/>
        </StackLayout>
        <StackLayout Orientation="Horizontal">
            <Button x:Name="btnFixPositionLeft" Text="L" WidthRequest="30" BackgroundColor="{StaticResource Accent}" Padding="5,24"/>
            <xct:RangeSlider
                HorizontalOptions="FillAndExpand"
                x:Name="sliderRangeControl"
                MaximumValue="100"
                MinimumValue="0"
                ValueLabelStringFormat="{StaticResource CustomValueLabeStringFormat}"
                StepValue="1"
                LowerThumbRadius="5"
                UpperThumbRadius="5"
                LowerThumbSize="20"
                UpperThumbSize="20"
                LowerValue="0"
                UpperValue="1000"
                LowerValueLabelStyle="{StaticResource ThumbLabelStyle}"
                LowerThumbColor="{StaticResource Primary}" LowerThumbBorderColor="{StaticResource SecondaryAccent}"
                UpperValueLabelStyle="{StaticResource ThumbLabelStyle}"
                UpperThumbColor="{StaticResource RareAccent}" UpperThumbBorderColor="{StaticResource SecondaryAccent}"
                TrackHighlightColor="{StaticResource SecondaryAccent}" TrackHighlightBorderColor="{StaticResource SecondaryAccent}"
                TrackColor="#555"
            >
                <xct:RangeSlider.LowerThumbView>
                    <Label Text="" VerticalTextAlignment="Center" HorizontalTextAlignment="Center"/>
                </xct:RangeSlider.LowerThumbView>
                <xct:RangeSlider.UpperThumbView>
                    <Label FormattedText="" Text="" VerticalTextAlignment="Center" HorizontalTextAlignment="Center"/>
                </xct:RangeSlider.UpperThumbView>
            </xct:RangeSlider>
            <Button x:Name="btnFixPositionRight" Text="R" WidthRequest="30" BackgroundColor="{StaticResource Accent}"/>
        </StackLayout>

        <StackLayout Orientation="Horizontal" HorizontalOptions="CenterAndExpand">
            <Grid Padding="1"
                RowDefinitions="30,30"
                ColumnDefinitions="40,*,40">
                <Button Grid.Row="0"
                    x:Name="btnRangeLeftMoveLeft" 
                    Text="⇇"
                    TextColor="{StaticResource SecondaryAccent}"
                    FontAttributes="Bold"
                    Padding="0,-2,0,0"
                    BorderWidth="2"
                    CornerRadius="10"
                    BorderColor="{StaticResource SecondaryAccent}"/>
                <Button Grid.Row="1"
                    x:Name="btnRangeLeftMoveRight" 
                    Text="⇉"
                    TextColor="{StaticResource SecondaryAccent}"
                    FontAttributes="Bold"
                    Padding="0,-2,0,0"
                    BorderWidth="2"
                    CornerRadius="10"
                    BorderColor="{StaticResource SecondaryAccent}"/>
                <Button Grid.Column="1" Grid.RowSpan="2"
                    IsEnabled="False"
                    VerticalOptions="Center"
                    x:Name="btnPlayPause" 
                    Text="Play"
                    TextColor="{StaticResource SecondaryAccent}"
                    FontAttributes="Bold"
                    HeightRequest="80"
                    BorderWidth="4"
                    CornerRadius="20"
                    BorderColor="{StaticResource SecondaryAccent}"/>
                <Button Grid.Row="0" Grid.Column="2"
                    x:Name="btnRangeRightMoveLeft" 
                    Text="⇇"
                    BackgroundColor="{StaticResource RareAccent}"
                    TextColor="Black"
                    FontAttributes="Bold"
                    Padding="0,-2,0,0"
                    BorderWidth="2"
                    CornerRadius="10"
                    BorderColor="{StaticResource SecondaryAccent}"/>
                <Button Grid.Row="1" Grid.Column="2"
                    x:Name="btnRangeRightMoveRight" 
                    Text="⇉"
                    BackgroundColor="{StaticResource RareAccent}"
                    TextColor="Black"
                    FontAttributes="Bold"
                    Padding="0,-2,0,0"
                    BorderWidth="2"
                    CornerRadius="10"
                    BorderColor="{StaticResource SecondaryAccent}"/>
            </Grid>
        </StackLayout>
        <StackLayout VerticalOptions="EndAndExpand">
            <Label HorizontalOptions="Center" x:Name="lbStatus" TextColor="{StaticResource Accent}" FontAttributes="Bold" FontSize="26"></Label>
            <Label HorizontalOptions="Center" x:Name="lbPlayingTime" TextColor="{StaticResource Accent}" FontSize="18"></Label>
        </StackLayout>
        <StackLayout Padding="10">
            <Button x:Name="btnParty" Command="{Binding PartyCommand}" Text="Party!" BackgroundColor="{StaticResource Accent}"/>
        </StackLayout>
    </StackLayout>
</ContentPage>
